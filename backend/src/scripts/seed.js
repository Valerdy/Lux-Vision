const { pool } = require('../config/database');
const bcrypt = require('bcryptjs');

const seedData = async () => {
  const client = await pool.connect();

  try {
    console.log('üå± Starting database seeding...');

    // Seed admin user
    const hashedPassword = await bcrypt.hash('Admin@123', 10);
    await client.query(`
      INSERT INTO users (email, password, first_name, last_name, phone, role, is_verified)
      VALUES ($1, $2, $3, $4, $5, $6, $7)
      ON CONFLICT (email) DO NOTHING
    `, [
      'admin@luxvision.cg',
      hashedPassword,
      'Admin',
      'LuxVision',
      '+242 06 123 4567',
      'admin',
      true
    ]);

    // Seed products (all 24 products from frontend)
    const products = [
      {
        id: '1',
        name: 'Classique Rond',
        brand: 'LuxVision',
        description: 'Monture ronde intemporelle qui allie charme vintage et sophistication moderne.',
        price: 95000,
        discount: 0,
        category: 'optical',
        gender: 'unisex',
        frame_shape: 'Rond',
        material: 'Ac√©tate',
        color: '√âcaille',
        stock_quantity: 50,
        in_stock: true,
        images: JSON.stringify([
          'https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=600',
          'https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=600&fit=crop',
          'https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=600&crop=center'
        ]),
        features: JSON.stringify([
          'Ac√©tate l√©ger',
          'Charni√®res √† ressort',
          'Rev√™tement anti-reflet',
          'Protection UV'
        ])
      },
      {
        id: '2',
        name: 'Aviateur Pro',
        brand: 'SkyLine',
        description: 'Lunettes de soleil aviateur iconiques avec verres polaris√©s premium pour une protection ultime.',
        price: 125000,
        discount: 0,
        category: 'sunglasses',
        gender: 'unisex',
        frame_shape: 'Aviateur',
        material: 'M√©tal',
        color: 'Or',
        stock_quantity: 50,
        in_stock: true,
        images: JSON.stringify([
          'https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=600',
          'https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=600',
          'https://images.unsplash.com/photo-1473496169904-658ba7c44d8a?w=600'
        ]),
        features: JSON.stringify([
          'Verres polaris√©s',
          'Monture m√©tallique',
          'Protection UV 100%',
          'Plaquettes nasales ajustables'
        ])
      },
      {
        id: '3',
        name: '≈íil de Chat √âl√©gance',
        brand: 'Femme Chic',
        description: 'Montures ≈ìil de chat sophistiqu√©es qui ajoutent une touche de glamour √† tous vos looks.',
        price: 105000,
        discount: 0,
        category: 'optical',
        gender: 'women',
        frame_shape: '≈íil de Chat',
        material: 'Ac√©tate',
        color: 'Noir',
        stock_quantity: 50,
        in_stock: true,
        images: JSON.stringify([
          'https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=600',
          'https://images.unsplash.com/photo-1577803645773-f96470509666?w=600',
          'https://images.unsplash.com/photo-1578071439886-6e95cf2ea5c4?w=600'
        ]),
        features: JSON.stringify([
          'Ac√©tate fait main',
          'Branches flexibles',
          'R√©sistant aux rayures',
          'Filtre lumi√®re bleue'
        ])
      },
      {
        id: '4',
        name: 'Carr√© Urbain',
        brand: 'ModernEdge',
        description: 'Montures carr√©es contemporaines parfaites pour le professionnel moderne.',
        price: 85000,
        discount: 0,
        category: 'optical',
        gender: 'men',
        frame_shape: 'Carr√©',
        material: 'Titane',
        color: 'Noir Mat',
        stock_quantity: 50,
        in_stock: true,
        images: JSON.stringify([
          'https://images.unsplash.com/photo-1509695507497-903c140c43b0?w=600',
          'https://images.unsplash.com/photo-1556306535-0f09a537f0a3?w=600',
          'https://images.unsplash.com/photo-1516509453726-fd2bb40bc165?w=600'
        ]),
        features: JSON.stringify([
          'Monture en titane',
          'Ajustement personnalisable',
          'Rev√™tement anti-√©blouissement',
          'Design ultra-l√©ger'
        ])
      },
      {
        id: '5',
        name: 'Wayfarer R√©tro',
        brand: 'Vintage Soul',
        description: 'Style wayfarer classique avec une touche moderne pour les passionn√©s de tendances.',
        price: 90000,
        discount: 0,
        category: 'sunglasses',
        gender: 'unisex',
        frame_shape: 'Wayfarer',
        material: 'Ac√©tate',
        color: '√âcaille Marron',
        stock_quantity: 50,
        in_stock: true,
        images: JSON.stringify([
          'https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=600',
          'https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=600',
          'https://images.unsplash.com/photo-1473496169904-658ba7c44d8a?w=600'
        ]),
        features: JSON.stringify([
          'Verres polaris√©s',
          'Monture en ac√©tate',
          'Protection UV400',
          'Design iconique'
        ])
      },
      {
        id: '6',
        name: 'Bouclier Sport',
        brand: 'ActiveVision',
        description: 'Lunettes de soleil haute performance con√ßues pour les modes de vie actifs.',
        price: 115000,
        discount: 0,
        category: 'sunglasses',
        gender: 'unisex',
        frame_shape: 'Bouclier',
        material: 'TR90',
        color: 'Gris Mat',
        stock_quantity: 50,
        in_stock: true,
        images: JSON.stringify([
          'https://images.unsplash.com/photo-1508296695146-257a814070b4?w=600',
          'https://images.unsplash.com/photo-1585659722983-3a675dabf23d?w=600',
          'https://images.unsplash.com/photo-1584036561566-baf8f5f1b144?w=600'
        ]),
        features: JSON.stringify([
          'R√©sistant aux chocs',
          'Design enveloppant',
          'Rev√™tement anti-bu√©e',
          'Grip caoutchout√©'
        ])
      },
      {
        id: '7',
        name: 'Oversize Glamour',
        brand: 'Diva',
        description: 'Lunettes de soleil oversize audacieuses qui attirent tous les regards.',
        price: 110000,
        discount: 0,
        category: 'sunglasses',
        gender: 'women',
        frame_shape: 'Oversize',
        material: 'Ac√©tate',
        color: 'Bordeaux',
        stock_quantity: 50,
        in_stock: true,
        images: JSON.stringify([
          'https://images.unsplash.com/photo-1577803645773-f96470509666?w=600',
          'https://images.unsplash.com/photo-1578071439886-6e95cf2ea5c4?w=600',
          'https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=600'
        ]),
        features: JSON.stringify([
          'Verres d√©grad√©s',
          'Grande couverture',
          'Accents m√©talliques',
          'Style designer'
        ])
      },
      {
        id: '8',
        name: 'Fil Minimaliste',
        brand: 'Essence',
        description: 'Montures filaires ultra-l√©g√®res pour ceux qui pr√©f√®rent l\'√©l√©gance discr√®te.',
        price: 75000,
        discount: 0,
        category: 'optical',
        gender: 'unisex',
        frame_shape: 'Ovale',
        material: 'M√©tal',
        color: 'Argent',
        stock_quantity: 50,
        in_stock: true,
        images: JSON.stringify([
          'https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=600',
          'https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=600&fit=crop',
          'https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=600&crop=center'
        ]),
        features: JSON.stringify([
          'Monture fil ultra-fine',
          'M√©tal √† m√©moire',
          'Sensation imperceptible',
          'Plaquettes nasales ajustables'
        ])
      },
      {
        id: '9',
        name: 'Pilote Classique',
        brand: 'AeroStyle',
        description: 'Style pilote authentique inspir√© des aviateurs militaires, symbole de virilit√©.',
        price: 135000,
        discount: 0,
        category: 'sunglasses',
        gender: 'men',
        frame_shape: 'Aviateur',
        material: 'Acier Inoxydable',
        color: 'Argent Chrom√©',
        stock_quantity: 50,
        in_stock: true,
        images: JSON.stringify([
          'https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=600',
          'https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=600',
          'https://images.unsplash.com/photo-1473496169904-658ba7c44d8a?w=600'
        ]),
        features: JSON.stringify([
          'Verres miroir',
          'Monture double pont',
          'Protection UV maximale',
          '√âtui rigide inclus'
        ])
      },
      {
        id: '10',
        name: 'Papillon Luxe',
        brand: '√âlite Paris',
        description: 'Lunettes papillon luxueuses orn√©es de d√©tails raffin√©s pour une allure exceptionnelle.',
        price: 145000,
        discount: 10,
        category: 'sunglasses',
        gender: 'women',
        frame_shape: 'Papillon',
        material: 'Ac√©tate Premium',
        color: 'Bleu Nacr√©',
        stock_quantity: 50,
        in_stock: true,
        images: JSON.stringify([
          'https://images.unsplash.com/photo-1577803645773-f96470509666?w=600',
          'https://images.unsplash.com/photo-1606509237715-84f90e5a1f66?w=600',
          'https://images.unsplash.com/photo-1578071439886-6e95cf2ea5c4?w=600'
        ]),
        features: JSON.stringify([
          'Cristaux Swarovski',
          'Verres d√©grad√©s haute qualit√©',
          'Design italien',
          '√âdition limit√©e'
        ])
      },
      {
        id: '11',
        name: 'Rectangle Pro',
        brand: 'TechVision',
        description: 'Monture rectangulaire professionnelle avec protection lumi√®re bleue int√©gr√©e.',
        price: 98000,
        discount: 0,
        category: 'optical',
        gender: 'men',
        frame_shape: 'Rectangle',
        material: 'TR90',
        color: 'Bleu Marine',
        stock_quantity: 50,
        in_stock: true,
        images: JSON.stringify([
          'https://images.unsplash.com/photo-1509695507497-903c140c43b0?w=600',
          'https://images.unsplash.com/photo-1556306535-0f09a537f0a3?w=600',
          'https://images.unsplash.com/photo-1516509453726-fd2bb40bc165?w=600'
        ]),
        features: JSON.stringify([
          'Filtre anti-lumi√®re bleue',
          'Finition mate',
          'Charni√®res renforc√©es',
          'Compatible verres progressifs'
        ])
      },
      {
        id: '12',
        name: 'Vintage Rond',
        brand: 'R√©tro Chic',
        description: 'Inspiration ann√©es 70 avec des montures rondes intemporelles et authentiques.',
        price: 88000,
        discount: 0,
        category: 'optical',
        gender: 'unisex',
        frame_shape: 'Rond',
        material: 'M√©tal Dor√©',
        color: 'Or Vintage',
        stock_quantity: 50,
        in_stock: true,
        images: JSON.stringify([
          'https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=600',
          'https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=600',
          'https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=600&fit=crop'
        ]),
        features: JSON.stringify([
          'Design r√©tro',
          'Monture l√©g√®re',
          'Verres anti-rayures',
          'Fabriqu√© en France'
        ])
      },
      {
        id: '13',
        name: 'Sport Dynamique',
        brand: 'ActivePro',
        description: 'Con√ßues pour les athl√®tes exigeants, avec technologie anti-glisse brevet√©e.',
        price: 128000,
        discount: 0,
        category: 'sunglasses',
        gender: 'unisex',
        frame_shape: 'Sport',
        material: 'Polycarbonate',
        color: 'Rouge Racing',
        stock_quantity: 50,
        in_stock: true,
        images: JSON.stringify([
          'https://images.unsplash.com/photo-1508296695146-257a814070b4?w=600',
          'https://images.unsplash.com/photo-1585659722983-3a675dabf23d?w=600',
          'https://images.unsplash.com/photo-1584036561566-baf8f5f1b144?w=600'
        ]),
        features: JSON.stringify([
          'Verres photochromiques',
          'Ventilation int√©gr√©e',
          'Ajustement s√©curis√©',
          'R√©sistant √† l\'eau'
        ])
      },
      {
        id: '14',
        name: 'Chic Parisien',
        brand: 'Paris Mode',
        description: '√âl√©gance parisienne incarn√©e dans des montures raffin√©es et sophistiqu√©es.',
        price: 118000,
        discount: 0,
        category: 'optical',
        gender: 'women',
        frame_shape: 'Rectangle',
        material: 'Ac√©tate',
        color: 'Noir Brillant',
        stock_quantity: 50,
        in_stock: true,
        images: JSON.stringify([
          'https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=600',
          'https://images.unsplash.com/photo-1577803645773-f96470509666?w=600',
          'https://images.unsplash.com/photo-1578071439886-6e95cf2ea5c4?w=600'
        ]),
        features: JSON.stringify([
          'Design fran√ßais',
          'Ac√©tate haute qualit√©',
          'Finition brillante',
          '√âtui en cuir offert'
        ])
      },
      {
        id: '15',
        name: 'G√©om√©trique Moderne',
        brand: 'Avant-Garde',
        description: 'Design g√©om√©trique audacieux pour les amateurs d\'avant-garde et de modernit√©.',
        price: 132000,
        discount: 0,
        category: 'sunglasses',
        gender: 'unisex',
        frame_shape: 'G√©om√©trique',
        material: 'Titane',
        color: 'Graphite',
        stock_quantity: 50,
        in_stock: true,
        images: JSON.stringify([
          'https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=600',
          'https://images.unsplash.com/photo-1556306535-0f09a537f0a3?w=600',
          'https://images.unsplash.com/photo-1509695507497-903c140c43b0?w=600'
        ]),
        features: JSON.stringify([
          'Forme unique',
          'Verres miroir',
          'Branches ajustables',
          'Collection designer'
        ])
      },
      {
        id: '16',
        name: 'Business Executive',
        brand: 'Executive Line',
        description: 'Montures premium pour cadres dirigeants, alliant √©l√©gance et professionnalisme.',
        price: 155000,
        discount: 15,
        category: 'optical',
        gender: 'men',
        frame_shape: 'Rectangle',
        material: 'Titane Pur',
        color: 'Gris Anthracite',
        stock_quantity: 50,
        in_stock: true,
        images: JSON.stringify([
          'https://images.unsplash.com/photo-1509695507497-903c140c43b0?w=600',
          'https://images.unsplash.com/photo-1556306535-0f09a537f0a3?w=600',
          'https://images.unsplash.com/photo-1516509453726-fd2bb40bc165?w=600'
        ]),
        features: JSON.stringify([
          'Titane pur',
          'Design sobre',
          'Finition premium',
          'Garantie 5 ans'
        ])
      },
      {
        id: '17',
        name: 'Boh√®me Soleil',
        brand: 'Boho Style',
        description: 'Style boh√®me chic avec d√©tails artisanaux pour un look estival d√©contract√©.',
        price: 92000,
        discount: 0,
        category: 'sunglasses',
        gender: 'women',
        frame_shape: 'Rond',
        material: 'Bois Recycl√©',
        color: 'Marron Naturel',
        stock_quantity: 50,
        in_stock: true,
        images: JSON.stringify([
          'https://images.unsplash.com/photo-1577803645773-f96470509666?w=600',
          'https://images.unsplash.com/photo-1578071439886-6e95cf2ea5c4?w=600',
          'https://images.unsplash.com/photo-1606509237715-84f90e5a1f66?w=600'
        ]),
        features: JSON.stringify([
          'D√©tails grav√©s',
          'Verres teint√©s',
          'Inspir√© de la nature',
          '√âco-responsable'
        ])
      },
      {
        id: '18',
        name: 'Tech Smart',
        brand: 'FutureTech',
        description: 'Lunettes intelligentes avec protection lumi√®re bleue avanc√©e et technologie anti-fatigue.',
        price: 198000,
        discount: 0,
        category: 'optical',
        gender: 'unisex',
        frame_shape: 'Rectangle',
        material: 'Fibre de Carbone',
        color: 'Noir Carbone',
        stock_quantity: 50,
        in_stock: true,
        images: JSON.stringify([
          'https://images.unsplash.com/photo-1509695507497-903c140c43b0?w=600',
          'https://images.unsplash.com/photo-1556306535-0f09a537f0a3?w=600',
          'https://images.unsplash.com/photo-1516509453726-fd2bb40bc165?w=600'
        ]),
        features: JSON.stringify([
          'Filtre lumi√®re bleue premium',
          'Rev√™tement hydrophobe',
          'Anti-bu√©e permanent',
          'Technologie NASA'
        ])
      },
      {
        id: '19',
        name: 'Clubmaster Original',
        brand: 'Heritage',
        description: 'Style clubmaster intemporel, symbole de sophistication depuis les ann√©es 50.',
        price: 108000,
        discount: 0,
        category: 'sunglasses',
        gender: 'unisex',
        frame_shape: 'Clubmaster',
        material: 'Ac√©tate et M√©tal',
        color: '√âcaille Havane',
        stock_quantity: 50,
        in_stock: true,
        images: JSON.stringify([
          'https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=600',
          'https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=600',
          'https://images.unsplash.com/photo-1473496169904-658ba7c44d8a?w=600'
        ]),
        features: JSON.stringify([
          'Design iconique',
          'Pont m√©tallique',
          'Verres G-15',
          'Fabriqu√© √† la main'
        ])
      },
      {
        id: '20',
        name: 'F√©line Chic',
        brand: 'F√©line',
        description: 'Montures f√©lines d√©licates qui subliment votre regard avec gr√¢ce et √©l√©gance.',
        price: 115000,
        discount: 0,
        category: 'optical',
        gender: 'women',
        frame_shape: '≈íil de Chat',
        material: 'Ac√©tate',
        color: 'Rose Poudr√©',
        stock_quantity: 50,
        in_stock: true,
        images: JSON.stringify([
          'https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=600',
          'https://images.unsplash.com/photo-1577803645773-f96470509666?w=600',
          'https://images.unsplash.com/photo-1578071439886-6e95cf2ea5c4?w=600'
        ]),
        features: JSON.stringify([
          'Forme allong√©e',
          'D√©tails dor√©s',
          'Ac√©tate italien',
          'Branches fines'
        ])
      },
      {
        id: '21',
        name: 'Urban Explorer',
        brand: 'CityLife',
        description: 'Pour l\'explorateur urbain moderne qui recherche style et protection au quotidien.',
        price: 102000,
        discount: 0,
        category: 'sunglasses',
        gender: 'men',
        frame_shape: 'Carr√©',
        material: 'TR90',
        color: 'Vert Militaire',
        stock_quantity: 50,
        in_stock: true,
        images: JSON.stringify([
          'https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=600',
          'https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=600',
          'https://images.unsplash.com/photo-1473496169904-658ba7c44d8a?w=600'
        ]),
        features: JSON.stringify([
          'Verres polaris√©s HD',
          'Monture flexible',
          'Protection lat√©rale',
          'Style d√©contract√©'
        ])
      },
      {
        id: '22',
        name: 'Crystal Clear',
        brand: 'Transparent',
        description: 'Montures transparentes tendance pour un look contemporain et √©pur√©.',
        price: 79000,
        discount: 0,
        category: 'optical',
        gender: 'unisex',
        frame_shape: 'Rond',
        material: 'Ac√©tate',
        color: 'Transparent Crystal',
        stock_quantity: 50,
        in_stock: true,
        images: JSON.stringify([
          'https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=600',
          'https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=600',
          'https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=600&fit=crop'
        ]),
        features: JSON.stringify([
          'Ac√©tate transparent',
          'Ultra-l√©ger',
          'Design minimaliste',
          'Unisexe moderne'
        ])
      },
      {
        id: '23',
        name: 'Glamour Nuit',
        brand: 'NightLife',
        description: 'Glamour nocturne avec des verres teint√©s parfaits pour vos sorties en soir√©e.',
        price: 142000,
        discount: 20,
        category: 'sunglasses',
        gender: 'women',
        frame_shape: 'Oversize',
        material: 'Ac√©tate',
        color: 'Noir avec Strass',
        stock_quantity: 50,
        in_stock: true,
        images: JSON.stringify([
          'https://images.unsplash.com/photo-1577803645773-f96470509666?w=600',
          'https://images.unsplash.com/photo-1578071439886-6e95cf2ea5c4?w=600',
          'https://images.unsplash.com/photo-1606509237715-84f90e5a1f66?w=600'
        ]),
        features: JSON.stringify([
          'Verres teint√©s roses',
          'Strass d√©coratifs',
          'Forme oversized',
          'Look VIP'
        ])
      },
      {
        id: '24',
        name: 'Professor Classic',
        brand: 'Academia',
        description: 'Style acad√©mique intemporel, parfait pour les intellectuels et professionnels.',
        price: 86000,
        discount: 0,
        category: 'optical',
        gender: 'men',
        frame_shape: 'Rond',
        material: 'Ac√©tate',
        color: '√âcaille Fonc√©e',
        stock_quantity: 50,
        in_stock: true,
        images: JSON.stringify([
          'https://images.unsplash.com/photo-1574258495973-f010dfbb5371?w=600',
          'https://images.unsplash.com/photo-1509695507497-903c140c43b0?w=600',
          'https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=600'
        ]),
        features: JSON.stringify([
          'Monture classique',
          'Pont keyhole',
          'Branches confortables',
          'Look distingu√©'
        ])
      }
    ];

    for (const product of products) {
      await client.query(`
        INSERT INTO products (
          id, name, brand, description, price, discount, category, gender,
          frame_shape, material, color, stock_quantity, in_stock, images, features
        ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15)
        ON CONFLICT (id) DO NOTHING
      `, [
        product.id, product.name, product.brand, product.description, product.price,
        product.discount, product.category, product.gender, product.frame_shape,
        product.material, product.color, product.stock_quantity, product.in_stock,
        product.images, product.features
      ]);
    }

    console.log('‚úÖ Seeded admin user');
    console.log(`‚úÖ Seeded ${products.length} products`);
    console.log('üéâ Seeding completed successfully!');

  } catch (error) {
    console.error('‚ùå Seeding failed:', error);
    throw error;
  } finally {
    client.release();
    await pool.end();
  }
};

// Run seeding
seedData()
  .then(() => {
    console.log('üéâ All data seeded successfully!');
    process.exit(0);
  })
  .catch((error) => {
    console.error('‚ùå Seeding failed:', error);
    process.exit(1);
  });
